"use strict";(self["webpackChunkforum_front_end_vue"]=self["webpackChunkforum_front_end_vue"]||[]).push([[634],{4556:function(t,s,e){e.d(s,{Z:function(){return o}});var a=function(){var t=this;t._self._c;return t._m(0)},r=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"spinner"},[s("div",{staticClass:"bouncing-loader"},[s("div"),s("div"),s("div")])])}],n=e(1001),i={},u=(0,n.Z)(i,a,r,!1,null,"52e6d627",null),o=u.exports},1634:function(t,s,e){e.r(s),e.d(s,{default:function(){return x}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container py-5"},[s("NavTabs"),t.isLoading?s("Spinner"):[s("h1",{staticClass:"mt-5"},[t._v(" 最新動態 ")]),s("hr"),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("h3",[t._v("最新餐廳")]),s("NewestRestaurants",{attrs:{restaurants:t.restaurants}})],1),s("div",{staticClass:"col-md-6"},[s("h3",[t._v("最新評論")]),s("NewestComments",{attrs:{comments:t.comments}})],1)])]],2)},r=[],n=function(){var t=this,s=t._self._c;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[t._v(" 最新餐廳 ")]),s("div",{staticClass:"card-body"},t._l(t.restaurants,(function(e){return s("div",{key:e.id},[s("h4",[s("router-link",{attrs:{to:{name:"restaurant",params:{id:e.id}}}},[t._v(" "+t._s(e.name)+" ")]),s("small",[t._v(t._s(e.Category.name))])],1),s("p",[t._v(t._s(e.description))]),t._v(" "+t._s(t._f("fromNow")(e.createdAt))+" "),s("hr")])})),0)])},i=[],u=e(3459),o={name:"NewestRestaurants",props:["restaurants"],mixins:[u.q]},c=o,d=e(1001),l=(0,d.Z)(c,n,i,!1,null,"a56b092e",null),m=l.exports,_=function(){var t=this,s=t._self._c;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[t._v(" 最新評論 ")]),s("div",{staticClass:"card-body"},t._l(t.comments,(function(e){return s("div",{key:e.id},[s("h4",[s("router-link",{attrs:{to:{name:"restaurant",params:{id:e.Restaurant.id}}}},[t._v(" "+t._s(e.Restaurant.name)+" ")])],1),s("p",[t._v(t._s(e.text))]),t._v("by "),s("a",{attrs:{href:"#"}},[t._v(" "+t._s(e.User.name)+" ")]),t._v(" "+t._s(t._f("fromNow")(e.createdAt))+" "),s("hr")])})),0)])},v=[],f={name:"NewestComments",props:["comments"],mixins:[u.q],data(){return{}}},h=f,p=(0,d.Z)(h,_,v,!1,null,null,null),C=p.exports,g=e(4818),w=e(4556),y=e(6163),N={name:"RestaurantsFeeds",components:{NewestRestaurants:m,NewestComments:C,Spinner:w.Z},created(){this.fetchFeeds()},data(){return{restaurants:[],comments:[],isLoading:!0}},methods:{async fetchFeeds(){try{this.isLoading=!0;const t=await(0,g.A4)();this.restaurants=t.data.restaurants,this.comments=t.data.comments.filter((t=>t.Restaurant&&t.text)),this.isLoading=!1}catch(t){this.isLoading=!1,y.F.fire({icon:"error",title:"無法取得最新動態，請稍後再試"})}}},created(){this.fetchFeeds()}},b=N,k=(0,d.Z)(b,a,r,!1,null,null,null),x=k.exports},4818:function(t,s,e){e.d(s,{A4:function(){return n},C2:function(){return i},nj:function(){return r},wF:function(){return u}});var a=e(6163);const r=({page:t="",categoryId:s=""})=>{const e=new URLSearchParams({page:t,categoryId:s}).toString();return(0,a.l)({url:`/restaurants?${e}`,method:"get"})},n=()=>(0,a.l)({url:"/restaurants/feeds",method:"get"}),i=()=>(0,a.l)({url:"/restaurants/top",method:"get"}),u=({restaurantId:t})=>a.l.get(`/restaurants/${t}`)}}]);
//# sourceMappingURL=634.ad79c728.js.map