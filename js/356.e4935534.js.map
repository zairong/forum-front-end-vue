{"version":3,"file":"js/356.e4935534.js","mappings":"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","sources":["webpack://forum-front-end-vue/./src/components/Spinner.vue","webpack://forum-front-end-vue/./src/components/Spinner.vue?b6e3","webpack://forum-front-end-vue/./src/views/Restaurants.vue","webpack://forum-front-end-vue/./src/components/RestaurantCard.vue","webpack://forum-front-end-vue/src/components/RestaurantCard.vue","webpack://forum-front-end-vue/./src/components/RestaurantCard.vue?0f99","webpack://forum-front-end-vue/./src/components/RestaurantCard.vue?7180","webpack://forum-front-end-vue/./src/components/RestaurantsNavPills.vue","webpack://forum-front-end-vue/src/components/RestaurantsNavPills.vue","webpack://forum-front-end-vue/./src/components/RestaurantsNavPills.vue?0e11","webpack://forum-front-end-vue/./src/components/RestaurantsNavPills.vue?a000","webpack://forum-front-end-vue/./src/components/RestaurantsPagination.vue","webpack://forum-front-end-vue/src/components/RestaurantsPagination.vue","webpack://forum-front-end-vue/./src/components/RestaurantsPagination.vue?a1fb","webpack://forum-front-end-vue/./src/components/RestaurantsPagination.vue?c3f9","webpack://forum-front-end-vue/src/views/Restaurants.vue","webpack://forum-front-end-vue/./src/views/Restaurants.vue?0f88","webpack://forum-front-end-vue/./src/views/Restaurants.vue?454e","webpack://forum-front-end-vue/./src/apis/restaurants.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"spinner\"},[_c('div',{staticClass:\"bouncing-loader\"},[_c('div'),_c('div'),_c('div')])])\n}]\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Spinner.vue?vue&type=template&id=52e6d627&scoped=true&\"\nvar script = {}\nimport style0 from \"./Spinner.vue?vue&type=style&index=0&id=52e6d627&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"52e6d627\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container py-5\"},[(_vm.isLoading)?_c('Spinner'):[_c('NavTabs'),_c('RestaurantsNavPills',{attrs:{\"categories\":_vm.categories}}),_c('div',{staticClass:\"row\"},_vm._l((_vm.restaurants),function(restaurant){return _c('RestaurantCard',{key:restaurant.id,attrs:{\"initial-restaurant\":restaurant}})}),1),(_vm.totalPage.length > 1)?_c('RestaurantPagination',{attrs:{\"categoryId\":_vm.categoryId,\"currentPage\":_vm.currentPage,\"totalPage\":_vm.totalPage,\"previousPage\":_vm.previousPage,\"nextPage\":_vm.nextPage}}):_vm._e(),(_vm.restaurants.length < 1)?_c('div',[_vm._v(\"此類別目前沒餐廳資料\")]):_vm._e()]],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col-md-6 col-lg-4\"},[_c('div',{staticClass:\"card mb-4\"},[_c('img',{staticClass:\"card-img-top\",attrs:{\"src\":_vm.restaurant.image,\"alt\":\"Card image cap\",\"width\":\"286px\",\"height\":\"180px\"}}),_c('div',{staticClass:\"card-body\"},[_c('p',{staticClass:\"card-text title-wrap\"},[_c('router-link',{attrs:{\"to\":{ name: 'restaurant', params: { id: _vm.restaurant.id } }}},[_vm._v(\" \"+_vm._s(_vm.restaurant.name)+\" \")])],1),_c('span',{staticClass:\"badge badge-secondary\"},[_vm._v(_vm._s(_vm.restaurant.Category.name))]),_c('p',{staticClass:\"card-text text-truncate\"},[_vm._v(\" \"+_vm._s(_vm.restaurant.description)+\" \")])]),_c('div',{staticClass:\"card-footer\"},[(_vm.restaurant.isFavorited)?_c('button',{staticClass:\"btn btn-danger btn-border favorite mr-2\",attrs:{\"type\":\"button\",\"disabled\":_vm.isProcessing},on:{\"click\":function($event){return _vm.deleteFavorite(_vm.restaurant.id)}}},[_vm._v(\" 移除最愛 \")]):_c('button',{staticClass:\"btn btn-primary btn-border favorite mr-2\",attrs:{\"type\":\"button\",\"disabled\":_vm.isProcessing},on:{\"click\":function($event){return _vm.addFavorite(_vm.restaurant.id)}}},[_vm._v(\" 加到最愛 \")]),(_vm.restaurant.isLiked)?_c('button',{staticClass:\"btn btn-danger like mr-2\",attrs:{\"disabled\":_vm.isProcessing,\"type\":\"button\"},on:{\"click\":function($event){return _vm.deleteIsLiked(_vm.restaurant.id)}}},[_vm._v(\" Unlike \")]):_c('button',{staticClass:\"btn btn-primary like mr-2\",attrs:{\"type\":\"button\",\"disabled\":_vm.isProcessing},on:{\"click\":function($event){return _vm.addIsLiked(_vm.restaurant.id)}}},[_vm._v(\" Like \")])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"col-md-6 col-lg-4\">\r\n    <div class=\"card mb-4\">\r\n      <img class=\"card-img-top\" :src=\"restaurant.image\" alt=\"Card image cap\" width=\"286px\" height=\"180px\">\r\n      <div class=\"card-body\">\r\n        <p class=\"card-text title-wrap\">\r\n          <router-link :to=\"{ name: 'restaurant', params: { id: restaurant.id } }\">\r\n            {{ restaurant.name }}\r\n          </router-link>\r\n        </p>\r\n        <span class=\"badge badge-secondary\">{{ restaurant.Category.name }}</span>\r\n        <p class=\"card-text text-truncate\">\r\n          {{ restaurant.description }}\r\n        </p>\r\n      </div>\r\n      <div class=\"card-footer\">\r\n        <button v-if=\"restaurant.isFavorited\" type=\"button\" :disabled=\"isProcessing\"\r\n          class=\"btn btn-danger btn-border favorite mr-2\" @click=\"deleteFavorite(restaurant.id)\">\r\n          移除最愛\r\n        </button>\r\n        <button v-else type=\"button\" :disabled=\"isProcessing\" class=\"btn btn-primary btn-border favorite mr-2\"\r\n          @click=\"addFavorite(restaurant.id)\">\r\n          加到最愛\r\n        </button>\r\n        <button v-if=\"restaurant.isLiked\" :disabled=\"isProcessing\" type=\"button\" class=\"btn btn-danger like mr-2\"\r\n          @click=\"deleteIsLiked(restaurant.id)\">\r\n          Unlike\r\n        </button>\r\n        <button v-else type=\"button\" :disabled=\"isProcessing\" class=\"btn btn-primary like mr-2\"\r\n          @click=\"addIsLiked(restaurant.id)\">\r\n          Like\r\n        </button>\r\n      </div>\r\n    </div>\r\n</div>\r\n</template>\r\n<script>\r\nimport { emptyImageFilter } from '@/utils/mixins'\r\nimport { reqAddFavorite, reqdeleteFavorite, reqAddLiked, reqdeleteLiked } from '@/apis/users'\r\nimport { Toast } from '@/utils/helpers'\r\nexport default {\r\n  props: ['initialRestaurant']\r\n  ,\r\n  data() {\r\n    return {\r\n      restaurant: this.initialRestaurant,\r\n      isProcessing: false\r\n    }\r\n  },\r\n  methods: {\r\n    //新增最愛\r\n    async addFavorite(restaurantId) {\r\n      try {\r\n        this.isProcessing = true\r\n        // STEP 3: 使用撰寫好的 addFavorite 方法去呼叫 API，並取得回傳內容\r\n        const response = await reqAddFavorite({ restaurantId })\r\n        const { data } = response\r\n        // STEP 4: 若請求過程有錯，則進到錯誤處理\r\n        if (data.status === 'error') {\r\n          throw new Error(data.message)\r\n        }\r\n        // STEP 5: 請求成功的話，改變 Vue 內的資料狀態\r\n        this.isProcessing = false\r\n\r\n        this.restaurant.isFavorited = true\r\n      } catch (error) {\r\n        // STEP 6: 請求失敗的話則跳出錯誤提示\r\n        this.isProcessing = false\r\n\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法將餐廳加入最愛，請稍後再試'\r\n        })\r\n        console.log('error', error)\r\n      }\r\n    },\r\n    //移除最愛\r\n    async deleteFavorite(restaurantId) {\r\n      try {\r\n        this.isProcessing = true\r\n\r\n        // STEP 3: 使用撰寫好的 addFavorite 方法去呼叫 API，並取得回傳內容\r\n        const response = await reqdeleteFavorite({ restaurantId })\r\n        const { data } = response\r\n        // STEP 4: 若請求過程有錯，則進到錯誤處理\r\n        if (data.status === 'error') {\r\n          throw new Error(data.message)\r\n        }\r\n        // STEP 5: 請求成功的話，改變 Vue 內的資料狀態\r\n        this.restaurant.isFavorited = false\r\n        this.isProcessing = false\r\n\r\n      } catch (error) {\r\n        // STEP 6: 請求失敗的話則跳出錯誤提示\r\n        this.isProcessing = false\r\n\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法將餐廳加入最愛，請稍後再試'\r\n        })\r\n        console.log('error', error)\r\n      }\r\n    },\r\n    //新增喜歡\r\n    async addIsLiked(restaurantId) {\r\n      try {\r\n        this.isProcessing = true\r\n\r\n        // STEP 3: 使用撰寫好的 addFavorite 方法去呼叫 API，並取得回傳內容\r\n        const response = await reqAddLiked({ restaurantId })\r\n        const { data } = response\r\n        // STEP 4: 若請求過程有錯，則進到錯誤處理\r\n        if (data.status === 'error') {\r\n          throw new Error(data.message)\r\n        }\r\n        // STEP 5: 請求成功的話，改變 Vue 內的資料狀態\r\n        this.restaurant.isLiked = true\r\n        this.isProcessing = false\r\n\r\n      } catch (error) {\r\n        // STEP 6: 請求失敗的話則跳出錯誤提示\r\n        this.isProcessing = false\r\n\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法將餐廳加入最愛，請稍後再試'\r\n        })\r\n        console.log('error', error)\r\n      }\r\n    },\r\n    //移除喜歡\r\n    async deleteIsLiked(restaurantId) {\r\n      try {\r\n        this.isProcessing = true\r\n\r\n        // STEP 3: 使用撰寫好的 addFavorite 方法去呼叫 API，並取得回傳內容\r\n        const response = await reqdeleteLiked({ restaurantId })\r\n        const { data } = response\r\n        // STEP 4: 若請求過程有錯，則進到錯誤處理\r\n        if (data.status === 'error') {\r\n          throw new Error(data.message)\r\n        }\r\n        // STEP 5: 請求成功的話，改變 Vue 內的資料狀態\r\n        this.restaurant.isLiked = false\r\n        this.isProcessing = false\r\n\r\n      } catch (error) {\r\n        // STEP 6: 請求失敗的話則跳出錯誤提示\r\n        this.isProcessing = false\r\n\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法將餐廳加入最愛，請稍後再試'\r\n        })\r\n        console.log('error', error)\r\n      }\r\n    },\r\n  },\r\n  mixins: [emptyImageFilter]\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.badge.badge-secondary {\r\n  padding: 0;\r\n  margin: 8px 0;\r\n  color: #bd2333;\r\n  background-color: transparent;\r\n}\r\n\r\n.btn,\r\n.btn-border.btn:hover {\r\n  margin: 7px 14px 7px 0;\r\n}\r\n\r\n.card {\r\n  margin-bottom: 2rem !important;\r\n}\r\n\r\n.card-img-top {\r\n  background-color: #EFEFEF;\r\n}\r\n\r\n.card-body {\r\n  padding: 17.5px;\r\n}\r\n\r\n.card-footer {\r\n  padding: 9px 17.5px;\r\n  border-color: rgb(232, 232, 232);\r\n  background: white;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RestaurantCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RestaurantCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RestaurantCard.vue?vue&type=template&id=40b0f3fd&scoped=true&\"\nimport script from \"./RestaurantCard.vue?vue&type=script&lang=js&\"\nexport * from \"./RestaurantCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RestaurantCard.vue?vue&type=style&index=0&id=40b0f3fd&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"40b0f3fd\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ul',{staticClass:\"nav nav-pills mb-4\"},[_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":{ name: 'restaurants' }}},[_vm._v(\" 全部 \")])],1),_vm._l((_vm.categories),function(category){return _c('li',{key:category.id,staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":{ name: 'restaurants', query: { categoryId: category.id} }}},[_vm._v(\" \"+_vm._s(category.name)+\" \")])],1)})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ul class=\"nav nav-pills mb-4\">\r\n    <li class=\"nav-item\">\r\n      \r\n      <router-link class=\"nav-link\" :to=\"{ name: 'restaurants' }\">\r\n        全部\r\n      </router-link>\r\n    </li>\r\n\r\n    <li v-for=\"category in categories\"\r\n      :key=\"category.id\"\r\n      class=\"nav-item\">\r\n      <router-link class=\"nav-link\" \r\n      :to=\"{ name: 'restaurants', query: { categoryId: category.id} }\"\r\n      >\r\n        {{category.name}}\r\n      </router-link>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: ['categories']\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.nav-pills {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 1rem !important;\r\n}\r\n\r\n.nav-pills .nav-link {\r\n  margin-right: 7px;\r\n  margin-bottom: 7px;\r\n  padding: 5px 10px 3px;\r\n  color: #4d4d4d;\r\n  border: 1px solid #a1a1a1;\r\n  transition: none;\r\n}\r\n\r\n.nav-pills .nav-link.active,\r\n.nav-pills .show > .nav-link {\r\n  border-width: 2px;\r\n  border-color: #bd2333;\r\n  background-color: transparent;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RestaurantsNavPills.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RestaurantsNavPills.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RestaurantsNavPills.vue?vue&type=template&id=122607fe&scoped=true&\"\nimport script from \"./RestaurantsNavPills.vue?vue&type=script&lang=js&\"\nexport * from \"./RestaurantsNavPills.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RestaurantsNavPills.vue?vue&type=style&index=0&id=122607fe&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"122607fe\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('nav',{attrs:{\"aria-label\":\"Page navigation example\"}},[_c('ul',{staticClass:\"pagination\"},[_c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.previousPage),expression:\"previousPage\"}],class:['page-item', { disabled: _vm.currentPage === 1 }]},[_c('router-link',{staticClass:\"page-link\",attrs:{\"aria-label\":\"Previous\",\"to\":{\n        name: 'restaurants',\n        query: { categoryId: _vm.categoryId, page: _vm.previousPage }\n      }}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"«\")])])],1),_vm._l((_vm.totalPage),function(page){return _c('li',{key:page,class:['page-item', { active: _vm.currentPage === page }]},[_c('router-link',{staticClass:\"page-link\",attrs:{\"to\":{ name: 'restaurants', query: { categoryId: _vm.categoryId, page } }}},[_vm._v(\" \"+_vm._s(page)+\" \")])],1)}),_c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.nextPage),expression:\"nextPage\"}],class:['page-item', { disabled: _vm.currentPage === _vm.totalPage.length }]},[_c('router-link',{staticClass:\"page-link\",attrs:{\"to\":{ name: 'restaurants', query: { categoryId: _vm.categoryId, page: _vm.nextPage } },\"aria-label\":\"Next\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"»\")])])],1)],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <nav aria-label=\"Page navigation example\">\r\n    <ul class=\"pagination\">\r\n      <!-- 前一頁 previousPage -->\r\n      <li v-show=\"previousPage\" :class=\"['page-item', { disabled: currentPage === 1 }]\">\r\n        <router-link class=\"page-link\" aria-label=\"Previous\" :to=\"{\r\n          name: 'restaurants',\r\n          query: { categoryId, page: previousPage }\r\n        }\">\r\n          <span aria-hidden=\"true\">&laquo;</span>\r\n        </router-link>\r\n      </li>\r\n\r\n\r\n      <!-- 頁碼 -->\r\n      <li v-for=\"page in totalPage\" :key=\"page\" :class=\"['page-item', { active: currentPage === page }]\">\r\n        <router-link class=\"page-link\" :to=\"{ name: 'restaurants', query: { categoryId, page } }\">\r\n          {{ page }}\r\n        </router-link>\r\n      </li>\r\n\r\n      <!-- 後一頁 nextPage -->\r\n      <li v-show=\"nextPage\" :class=\"['page-item', { disabled: currentPage === totalPage.length }]\">\r\n        <router-link class=\"page-link\" :to=\"{ name: 'restaurants', query: { categoryId, page: nextPage } }\"\r\n          aria-label=\"Next\">\r\n          <span aria-hidden=\"true\">&raquo;</span>\r\n        </router-link>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'RestaurantPagination',\r\n  props: ['categoryId', 'currentPage', 'totalPage', 'previousPage', 'nextPage']\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.page-link {\r\n  height: 37px;\r\n  padding: 7px 20px;\r\n  color: #bd2333;\r\n}\r\n\r\n.page-item.active .page-link,\r\n.page-item.active span {\r\n  color: white;\r\n  background-color: #bd2333;\r\n  border-color: #bd2333;\r\n  z-index: 1;\r\n}\r\n\r\n.page-item span {\r\n  color: #bd2333;\r\n}\r\n\r\na.page-link:hover,\r\na.page-link:hover span {\r\n  color: white;\r\n  background-color: #bd2333;\r\n  border-color: #bd2333;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RestaurantsPagination.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RestaurantsPagination.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RestaurantsPagination.vue?vue&type=template&id=7a8af126&scoped=true&\"\nimport script from \"./RestaurantsPagination.vue?vue&type=script&lang=js&\"\nexport * from \"./RestaurantsPagination.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RestaurantsPagination.vue?vue&type=style&index=0&id=7a8af126&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a8af126\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"container py-5\">\r\n\r\n    <Spinner v-if=\"isLoading\" />\r\n\r\n    <template v-else>\r\n      <NavTabs />\r\n      <!-- 餐廳類別標籤 RestaurantsNavPills -->\r\n      <RestaurantsNavPills :categories=\"categories\" />\r\n      <div class=\"row\">\r\n        <!-- 餐廳卡片 RestaurantCard-->\r\n        <RestaurantCard v-for=\"restaurant in restaurants\" :key=\"restaurant.id\" :initial-restaurant=\"restaurant\" />\r\n      </div>\r\n      <!-- 分頁標籤 RestaurantPagination -->\r\n      <RestaurantPagination v-if=\"totalPage.length > 1\" :categoryId=\"categoryId\" :currentPage=\"currentPage\"\r\n        :totalPage=\"totalPage\" :previousPage=\"previousPage\" :nextPage=\"nextPage\" />\r\n      <div v-if=\"restaurants.length < 1\">此類別目前沒餐廳資料</div>\r\n    </template>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport Spinner from '@/components/Spinner'\r\nimport RestaurantCard from '@/components/RestaurantCard'\r\nimport RestaurantsNavPills from '@/components/RestaurantsNavPills'\r\nimport RestaurantPagination from '@/components/RestaurantsPagination'\r\nimport { Toast } from '@/utils/helpers'\r\nimport { getRestaurants } from '@/apis/restaurants'\r\n// import { mapState } from 'vuex'\r\n\r\n\r\nexport default {\r\n  name: 'Restaurants',\r\n  components: {\r\n    RestaurantCard,\r\n    RestaurantsNavPills,\r\n    RestaurantPagination,\r\n    Spinner\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      restaurants: [],\r\n      categories: [],\r\n      categoryId: -1,\r\n      currentPage: 1,\r\n      totalPage: [],\r\n      previousPage: -1,\r\n      nextPage: -1,\r\n      isLoading: false\r\n    }\r\n  },\r\n  created() {\r\n\r\n    const { page = \"\", categoryId = \"\" } = this.$route.query\r\n    // console.log(categoryId)\r\n    //呼叫axios連接api取得數據並將資料放入data存取數據\r\n    this.fetchRestaurants({ queryPage: page, queryCategoryId: categoryId })\r\n    // this.$store.dispatch('restaurants/getRestaurants')\r\n\r\n    // this.chooseRestaurants({ queryPage: page, queryCategoryId: categoryId })\r\n  },\r\n  // computed: {\r\n  //   ...mapState('restaurants', ['Restaurants', 'Categories'])\r\n  // },\r\n  beforeRouteUpdate(to, from, next) {\r\n    const { page = '', categoryId = '' } = to.query\r\n    this.fetchRestaurants({ queryPage: page, queryCategoryId: categoryId })\r\n    // this.chooseRestaurants({ queryPage: page, queryCategoryId: categoryId })\r\n\r\n    next()\r\n  },\r\n  methods: {\r\n    async fetchRestaurants({ queryPage, queryCategoryId }) {\r\n      try {\r\n        this.isLoading = true\r\n        const response = await getRestaurants({\r\n          page: queryPage,\r\n          categoryId: queryCategoryId\r\n        })\r\n        // console.log(response.data)\r\n        // STEP 2：透過解構賦值，將所需要的資料從 response.data 取出\r\n        const {\r\n          restaurants,\r\n          categories,\r\n          categoryId,\r\n          page,\r\n          totalPage,\r\n          prev,\r\n          next\r\n        } = response.data\r\n\r\n        // STEP 3：將從伺服器取得的 data 帶入 Vue 內\r\n        this.restaurants = restaurants\r\n        this.categories = categories\r\n        this.categoryId = categoryId\r\n        this.currentPage = page\r\n        this.totalPage = totalPage\r\n        this.previousPage = prev\r\n        this.nextPage = next\r\n        this.isLoading = false\r\n\r\n      } catch (error) {\r\n        this.isLoading = false\r\n\r\n        console.log('error', error)\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法取得餐廳資料，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n\r\n    // chooseRestaurants({ queryPage, queryCategoryId }) {\r\n\r\n    //   //網頁沒有Category參數,取得全部餐廳信息(餐廳首頁)\r\n    //   if (queryCategoryId === \"\" || queryPage === \"\") {\r\n\r\n    //     //計算出共幾頁,1頁10筆資料\r\n    //     const numPage = 10\r\n    //     const Pages = Math.ceil(this.Restaurants.length / numPage)\r\n    //     //顯示分頁長度\r\n    //     for (let i = 1; i <= Pages; i++) {\r\n    //       this.TotalPage.push(i)\r\n    //     }\r\n    //     //以queryPage參數,篩選出個別餐廳信息\r\n    //     //(ex:queryPage=2 ,餐廳信息為:第10位之後信息,最多10個 )\r\n    //     function pagination(Pages, numPage, data) {\r\n    //       let startIndex = (Pages - 1) * numPage\r\n    //       let endIndex = startIndex + numPage\r\n    //       let filteredData = data.slice(startIndex, endIndex)\r\n    //       return filteredData\r\n    //     }\r\n    //     //全部的餐廳信息(含分頁)\r\n    //     if (queryPage === 1) { \r\n    //       this.categories = this.Categories\r\n    //       this.categoryId = { ...this.categoryId }\r\n    //       this.currentPage = queryPage\r\n    //       this.totalPage = this.TotalPage\r\n    //       this.previousPage = queryPage\r\n    //       this.nextPage = queryPage + 1\r\n    //       this.restaurants = pagination(queryPage, numPage, this.Restaurants)\r\n\r\n    //     } else if (queryPage ===this.TotalPage) {\r\n    //       this.categories = this.Categories\r\n    //       this.categoryId = { ...this.categoryId }\r\n    //       this.currentPage = queryPage\r\n    //       this.totalPage = this.TotalPage\r\n    //       this.previousPage = queryPage - 1\r\n    //       this.nextPage = queryPage \r\n    //       this.restaurants = pagination(queryPage, numPage, this.Restaurants)\r\n    //     }else{\r\n    //       this.categories = this.Categories\r\n    //       this.categoryId = { ...this.categoryId }\r\n    //       this.currentPage = queryPage\r\n    //       this.totalPage = this.TotalPage\r\n    //       this.previousPage = queryPage - 1\r\n    //       this.nextPage = queryPage + 1\r\n    //       this.restaurants = pagination(queryPage, numPage, this.Restaurants)\r\n    //     }\r\n\r\n\r\n    //   }\r\n    //   else {\r\n\r\n    //     function pagination(page, numPage, id, data) {\r\n    //       let filteredData = data.filter(function (item) {\r\n    //         return item.CategoryId === id\r\n    //       })\r\n    //       let startIndex = (page - 1) * numPage\r\n    //       let endIndex = startIndex + numPage\r\n    //       filteredData = filteredData.slice(startIndex, endIndex)\r\n    //       return filteredData\r\n    //     }\r\n\r\n    //     let numPage = 10\r\n    //     let result = pagination(queryPage, numPage, queryCategoryId, this.Restaurants)\r\n    //     console.log(result)\r\n\r\n\r\n    //   }\r\n    // }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Restaurants.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Restaurants.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Restaurants.vue?vue&type=template&id=52e577fe&\"\nimport script from \"./Restaurants.vue?vue&type=script&lang=js&\"\nexport * from \"./Restaurants.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { apiHelper } from '@/utils/helpers'\r\n\r\n//\r\nexport const reqGetRestaurants = () => {\r\n  return apiHelper({\r\n    url: `/restaurants?`,\r\n    method: 'get',\r\n    \r\n  })\r\n}\r\n//向伺服器請求所有餐廳信息\r\nexport const getRestaurants = ({ page = \"\", categoryId = \"\" }) => {\r\n  const searchParams = new URLSearchParams({ page, categoryId }).toString()\r\n  return apiHelper({\r\n    url: `/restaurants?${searchParams}`,\r\n    method: 'get',\r\n    \r\n  })\r\n}\r\n//向伺服器請求餐廳最新動態信息\r\nexport const reqGetRestaurantsFeeds = () => {\r\n  return apiHelper({\r\n    url: `/restaurants/feeds`,\r\n    method: 'get',\r\n    \r\n  })\r\n}\r\n//向伺服器請求人氣餐廳信息\r\nexport const reqgetRestaurantsTop = () => {\r\n  return apiHelper({\r\n    url: `/restaurants/top`,\r\n    method: 'get',\r\n    \r\n  })\r\n}\r\n//向伺服器請求個別餐廳信息\r\nexport const reqGetRestaurant = ({ restaurantId }) => {\r\n  return apiHelper.get(`/restaurants/${restaurantId}`, )\r\n}\r\n"],"names":["render","_vm","this","_self","_c","_m","staticRenderFns","staticClass","script","component","isLoading","attrs","categories","_l","restaurants","restaurant","key","id","totalPage","length","categoryId","currentPage","previousPage","nextPage","_e","_v","image","name","params","_s","Category","description","isFavorited","isProcessing","on","$event","deleteFavorite","addFavorite","isLiked","deleteIsLiked","addIsLiked","props","data","methods","restaurantId","Toast","icon","title","console","mixins","category","query","directives","rawName","value","expression","class","disabled","page","active","components","RestaurantCard","RestaurantsNavPills","RestaurantPagination","Spinner","created","queryPage","queryCategoryId","beforeRouteUpdate","next","prev","getRestaurants","searchParams","URLSearchParams","toString","apiHelper","url","method","reqGetRestaurantsFeeds","reqgetRestaurantsTop","reqGetRestaurant"],"sourceRoot":""}