"use strict";(self["webpackChunkforum_front_end_vue"]=self["webpackChunkforum_front_end_vue"]||[]).push([[547],{4556:function(t,r,a){a.d(r,{Z:function(){return c}});var s=function(){var t=this;t._self._c;return t._m(0)},e=[function(){var t=this,r=t._self._c;return r("div",{staticClass:"spinner"},[r("div",{staticClass:"bouncing-loader"},[r("div"),r("div"),r("div")])])}],n=a(1001),i={},o=(0,n.Z)(i,s,e,!1,null,"52e6d627",null),c=o.exports},9547:function(t,r,a){a.r(r),a.d(r,{default:function(){return v}});var s=function(){var t=this,r=t._self._c;return r("div",{staticClass:"container py-5"},[r("NavTabs"),t.isLoading?r("Spinner"):[r("h1",{staticClass:"mt-5"},[t._v(" 人氣餐廳 ")]),r("hr"),t._l(t.restaurants,(function(a){return r("div",{key:a.id,staticClass:"card mb-3",staticStyle:{"max-width":"540px",margin:"auto"}},[r("div",{staticClass:"row no-gutters"},[r("div",{staticClass:"col-md-4"},[r("a",{attrs:{href:"#"}},[r("img",{staticClass:"card-img",attrs:{src:t._f("emptyImage")(a.image)}})])]),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[t._v(" "+t._s(a.name)+" ")]),r("span",{staticClass:"badge badge-secondary"},[t._v("收藏數："+t._s(a.FavoriteCount))]),r("p",{staticClass:"card-text"},[t._v(" "+t._s(a.description)+" ")]),r("router-link",{staticClass:"btn btn-primary mr-2",attrs:{to:"/restaurants/1/dashboard"}},[t._v(" Show ")]),a.isFavorited?r("button",{staticClass:"btn btn-danger mr-2",attrs:{type:"button"},on:{click:function(r){return t.deleteFavorite(a,a.id)}}},[t._v(" 移除最愛 ")]):r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(r){return t.addFavorite(a,a.id)}}},[t._v(" 加到最愛 ")])],1)])])])}))]],2)},e=[],n=a(4556),i=a(3459),o=a(4818),c=a(8390),u=a(6163),d={name:"RestaurantsTop",components:{Spinner:n.Z},data(){return{restaurants:[],isLoading:!1}},created(){this.fetchRestaurantsTop()},methods:{async fetchRestaurantsTop(){try{this.isLoading=!0;const{data:t}=await(0,o.C2)();if("error"===t.status)throw new Error(t.message);this.restaurants=t.restaurants,this.isLoading=!1}catch(t){this.isLoading=!1,u.F.fire({icon:"error",title:"無法將餐廳加入最愛，請稍後再試"})}},async addFavorite(t,r){try{const t=await(0,c.yu)({restaurantId:r}),{data:a}=t;if("error"===a.status)throw new Error(a.message);this.fetchRestaurantsTop()}catch(a){u.F.fire({icon:"error",title:"無法將餐廳加入最愛，請稍後再試"}),console.log("error",a)}},async deleteFavorite(t,r){try{const t=await(0,c.kX)({restaurantId:r}),{data:a}=t;if("error"===a.status)throw new Error(a.message);this.fetchRestaurantsTop()}catch(a){u.F.fire({icon:"error",title:"無法將餐廳加入最愛，請稍後再試"}),console.log("error",a)}}},mixins:[i.L]},l=d,f=a(1001),h=(0,f.Z)(l,s,e,!1,null,null,null),v=h.exports},4818:function(t,r,a){a.d(r,{A4:function(){return n},C2:function(){return i},nj:function(){return e},wF:function(){return o}});var s=a(6163);const e=({page:t="",categoryId:r=""})=>{const a=new URLSearchParams({page:t,categoryId:r}).toString();return(0,s.l)({url:`/restaurants?${a}`,method:"get"})},n=()=>(0,s.l)({url:"/restaurants/feeds",method:"get"}),i=()=>(0,s.l)({url:"/restaurants/top",method:"get"}),o=({restaurantId:t})=>s.l.get(`/restaurants/${t}`)}}]);
//# sourceMappingURL=547.db7d9e2a.js.map