{"version":3,"file":"js/547.db7d9e2a.js","mappings":"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","sources":["webpack://forum-front-end-vue/./src/components/Spinner.vue","webpack://forum-front-end-vue/./src/components/Spinner.vue?b6e3","webpack://forum-front-end-vue/./src/views/RestaurantsTop.vue","webpack://forum-front-end-vue/src/views/RestaurantsTop.vue","webpack://forum-front-end-vue/./src/views/RestaurantsTop.vue?a11a","webpack://forum-front-end-vue/./src/views/RestaurantsTop.vue?e970","webpack://forum-front-end-vue/./src/apis/restaurants.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"spinner\"},[_c('div',{staticClass:\"bouncing-loader\"},[_c('div'),_c('div'),_c('div')])])\n}]\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Spinner.vue?vue&type=template&id=52e6d627&scoped=true&\"\nvar script = {}\nimport style0 from \"./Spinner.vue?vue&type=style&index=0&id=52e6d627&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"52e6d627\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container py-5\"},[_c('NavTabs'),(_vm.isLoading)?_c('Spinner'):[_c('h1',{staticClass:\"mt-5\"},[_vm._v(\" 人氣餐廳 \")]),_c('hr'),_vm._l((_vm.restaurants),function(restaurant){return _c('div',{key:restaurant.id,staticClass:\"card mb-3\",staticStyle:{\"max-width\":\"540px\",\"margin\":\"auto\"}},[_c('div',{staticClass:\"row no-gutters\"},[_c('div',{staticClass:\"col-md-4\"},[_c('a',{attrs:{\"href\":\"#\"}},[_c('img',{staticClass:\"card-img\",attrs:{\"src\":_vm._f(\"emptyImage\")(restaurant.image)}})])]),_c('div',{staticClass:\"col-md-8\"},[_c('div',{staticClass:\"card-body\"},[_c('h5',{staticClass:\"card-title\"},[_vm._v(\" \"+_vm._s(restaurant.name)+\" \")]),_c('span',{staticClass:\"badge badge-secondary\"},[_vm._v(\"收藏數：\"+_vm._s(restaurant.FavoriteCount))]),_c('p',{staticClass:\"card-text\"},[_vm._v(\" \"+_vm._s(restaurant.description)+\" \")]),_c('router-link',{staticClass:\"btn btn-primary mr-2\",attrs:{\"to\":\"/restaurants/1/dashboard\"}},[_vm._v(\" Show \")]),(restaurant.isFavorited)?_c('button',{staticClass:\"btn btn-danger mr-2\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.deleteFavorite(restaurant, restaurant.id)}}},[_vm._v(\" 移除最愛 \")]):_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.addFavorite(restaurant, restaurant.id)}}},[_vm._v(\" 加到最愛 \")])],1)])])])})]],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container py-5\">\r\n    <NavTabs />\r\n    <Spinner v-if=\"isLoading\" />\r\n    <template v-else>\r\n\r\n      <h1 class=\"mt-5\">\r\n        人氣餐廳\r\n      </h1>\r\n\r\n      <hr>\r\n      <div v-for=\"restaurant in restaurants\" :key=\"restaurant.id\" class=\"card mb-3\"\r\n        style=\"max-width: 540px;margin: auto;\">\r\n        <div class=\"row no-gutters\">\r\n          <div class=\"col-md-4\">\r\n            <a href=\"#\">\r\n              <img class=\"card-img\" :src=\"restaurant.image | emptyImage\">\r\n            </a>\r\n          </div>\r\n          <div class=\"col-md-8\">\r\n            <div class=\"card-body\">\r\n              <h5 class=\"card-title\">\r\n                {{ restaurant.name }}\r\n              </h5>\r\n              <span class=\"badge badge-secondary\">收藏數：{{ restaurant.FavoriteCount }}</span>\r\n              <p class=\"card-text\">\r\n                {{ restaurant.description }}\r\n              </p>\r\n              <router-link to=\"/restaurants/1/dashboard\" class=\"btn btn-primary mr-2\">\r\n                Show\r\n              </router-link>\r\n\r\n              <button v-if=\"restaurant.isFavorited\" type=\"button\" class=\"btn btn-danger mr-2\"\r\n                @click=\"deleteFavorite(restaurant, restaurant.id)\">\r\n                移除最愛\r\n              </button>\r\n              <button v-else type=\"button\" class=\"btn btn-primary\" @click=\"addFavorite(restaurant, restaurant.id)\">\r\n                加到最愛\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </template>\r\n\r\n</div>\r\n</template>\r\n<script>\r\nimport Spinner from '@/components/Spinner'\r\nimport { emptyImageFilter } from '@/utils/mixins'\r\nimport { reqgetRestaurantsTop } from '@/apis/restaurants'\r\nimport { reqAddFavorite, reqdeleteFavorite } from '@/apis/users'\r\nimport { Toast } from '@/utils/helpers'\r\n\r\n\r\nexport default {\r\n  name: 'RestaurantsTop',\r\n  components: { Spinner },\r\n  data() {\r\n    return {\r\n      restaurants: [],\r\n      isLoading: false\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchRestaurantsTop()\r\n  },\r\n  methods: {\r\n    //連接api並取得RestaurantsTop數據\r\n    async fetchRestaurantsTop() {\r\n      try {\r\n        this.isLoading = true\r\n        const { data } = await reqgetRestaurantsTop()\r\n        // console.log(data)\r\n        if (data.status === \"error\") {\r\n          throw new Error(data.message)\r\n        }\r\n        this.restaurants = data.restaurants\r\n        this.isLoading = false\r\n\r\n      } catch (error) {\r\n        this.isLoading = false\r\n\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法將餐廳加入最愛，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    //連接api並改變user的isFavorite狀態(isFavorite=true)\r\n    async addFavorite(restaurant, restaurantId) {\r\n      try {\r\n        // STEP 3: 使用撰寫好的 addFavorite 方法去呼叫 API，並取得回傳內容\r\n        const response = await reqAddFavorite({ restaurantId })\r\n        const { data } = response\r\n        // STEP 4: 若請求過程有錯，則進到錯誤處理\r\n        if (data.status === 'error') {\r\n          throw new Error(data.message)\r\n        }\r\n        // STEP 5: 請求成功的話，改變 Vue 內的資料狀態\r\n        // restaurant.isFavorited = true\r\n        this.fetchRestaurantsTop()\r\n\r\n      } catch (error) {\r\n        // STEP 6: 請求失敗的話則跳出錯誤提示\r\n\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法將餐廳加入最愛，請稍後再試'\r\n        })\r\n        console.log('error', error)\r\n      }\r\n    },\r\n    //連接api並改變user的isFavorite狀態(isFavorite=true)\r\n    async deleteFavorite(restaurant, restaurantId) {\r\n      try {\r\n        // STEP 3: 使用撰寫好的 addFavorite 方法去呼叫 API，並取得回傳內容\r\n        const response = await reqdeleteFavorite({ restaurantId })\r\n        const { data } = response\r\n        // STEP 4: 若請求過程有錯，則進到錯誤處理\r\n        if (data.status === 'error') {\r\n          throw new Error(data.message)\r\n        }\r\n        // STEP 5: 請求成功的話，改變 Vue 內的資料狀態\r\n        // restaurant.isFavorited = false\r\n        this.fetchRestaurantsTop()\r\n\r\n      } catch (error) {\r\n        // STEP 6: 請求失敗的話則跳出錯誤提示\r\n\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法將餐廳加入最愛，請稍後再試'\r\n        })\r\n        console.log('error', error)\r\n      }\r\n    },\r\n  },\r\n  mixins: [emptyImageFilter]\r\n}\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RestaurantsTop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RestaurantsTop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RestaurantsTop.vue?vue&type=template&id=6c0967a5&\"\nimport script from \"./RestaurantsTop.vue?vue&type=script&lang=js&\"\nexport * from \"./RestaurantsTop.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { apiHelper } from '@/utils/helpers'\r\n\r\n//\r\nexport const reqGetRestaurants = () => {\r\n  return apiHelper({\r\n    url: `/restaurants?`,\r\n    method: 'get',\r\n    \r\n  })\r\n}\r\n//向伺服器請求所有餐廳信息\r\nexport const getRestaurants = ({ page = \"\", categoryId = \"\" }) => {\r\n  const searchParams = new URLSearchParams({ page, categoryId }).toString()\r\n  return apiHelper({\r\n    url: `/restaurants?${searchParams}`,\r\n    method: 'get',\r\n    \r\n  })\r\n}\r\n//向伺服器請求餐廳最新動態信息\r\nexport const reqGetRestaurantsFeeds = () => {\r\n  return apiHelper({\r\n    url: `/restaurants/feeds`,\r\n    method: 'get',\r\n    \r\n  })\r\n}\r\n//向伺服器請求人氣餐廳信息\r\nexport const reqgetRestaurantsTop = () => {\r\n  return apiHelper({\r\n    url: `/restaurants/top`,\r\n    method: 'get',\r\n    \r\n  })\r\n}\r\n//向伺服器請求個別餐廳信息\r\nexport const reqGetRestaurant = ({ restaurantId }) => {\r\n  return apiHelper.get(`/restaurants/${restaurantId}`, )\r\n}\r\n"],"names":["render","_vm","this","_self","_c","_m","staticRenderFns","staticClass","script","component","isLoading","_v","_l","restaurants","restaurant","key","id","staticStyle","attrs","_f","image","_s","name","FavoriteCount","description","isFavorited","on","$event","deleteFavorite","addFavorite","components","Spinner","data","created","methods","Toast","icon","title","restaurantId","console","mixins","getRestaurants","page","categoryId","searchParams","URLSearchParams","toString","apiHelper","url","method","reqGetRestaurantsFeeds","reqgetRestaurantsTop","reqGetRestaurant"],"sourceRoot":""}